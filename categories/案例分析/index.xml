<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>案例分析 on Utop's Blog</title><link>https://www.ffutop.com/categories/%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/</link><description>Recent content in 案例分析 on Utop's Blog</description><generator>Hugo -- gohugo.io</generator><language>zh-cmn-Hans-CN</language><lastBuildDate>Sat, 26 Jul 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://www.ffutop.com/categories/%E6%A1%88%E4%BE%8B%E5%88%86%E6%9E%90/index.xml" rel="self" type="application/rss+xml"/><item><title>告别 Spring Boot 慢启动：GraalVM 原生镜像迁移实践</title><link>https://www.ffutop.com/posts/2025-07-26-spring-boot-native-migration-guide/</link><pubDate>Sat, 26 Jul 2025 00:00:00 +0000</pubDate><guid>https://www.ffutop.com/posts/2025-07-26-spring-boot-native-migration-guide/</guid><description>随着云原生和 Serverless 架构的兴起，应用的启动速度、内存占用和打包体积变得至关重要。Spring Boot 3.x 结合 GraalVM Native Image 技术，为 Java 应用提供了“原生编译”这一颠覆</description></item><item><title>PostgreSQL 崩溃故障原因排查纪实</title><link>https://www.ffutop.com/posts/2025-01-15-postgresql-crash/</link><pubDate>Wed, 15 Jan 2025 00:00:00 +0000</pubDate><guid>https://www.ffutop.com/posts/2025-01-15-postgresql-crash/</guid><description>1 背景简介 我们的生产环境依赖一套由 Patroni 管理的 PostgreSQL 高可用集群。该集群通过 HAProxy + Keepalived 对外提供服务，并使用 ETCD 存储集群状态。在故障发生前，这套系统一直稳定运</description></item><item><title>TimescaleDB 超表查询性能优化</title><link>https://www.ffutop.com/posts/2024-01-17-timescaledb-chunks-excluded/</link><pubDate>Wed, 17 Jan 2024 00:00:00 +0000</pubDate><guid>https://www.ffutop.com/posts/2024-01-17-timescaledb-chunks-excluded/</guid><description>最近后端服务在查询一张时序表时，莫名出现了断崖式的性能表现下降现象。出于对问题根本原因的探求，作者深入学习了 PostgreSQL 的规划器与执行器，以及 TimescaleDB 约束排</description></item><item><title>CURL 与证书链问题</title><link>https://www.ffutop.com/posts/2021-05-19-certificate-chain-problem/</link><pubDate>Wed, 19 May 2021 00:00:00 +0000</pubDate><guid>https://www.ffutop.com/posts/2021-05-19-certificate-chain-problem/</guid><description>&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#666">[&lt;/span>ffutop@desktop ~&lt;span style="color:#666">]&lt;/span> $ curl https://saas.ffutop.com
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl: &lt;span style="color:#666">(&lt;/span>60&lt;span style="color:#666">)&lt;/span> SSL certificate problem: unable to get &lt;span style="color:#007020">local&lt;/span> issuer certificate
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>More details here: https://curl.haxx.se/docs/sslcerts.html
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl failed to verify the legitimacy of the server and therefore could not
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>establish a secure connection to it. To learn more about this situation and
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>how to fix it, please visit the web page mentioned above.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>被 SSL 证书反复折磨，终于在某天灵光一现，发现了问题的根本原因。&lt;/p></description></item><item><title>NGINX 的域名解析缓存</title><link>https://www.ffutop.com/posts/2021-04-03-nginx-dns-cache/</link><pubDate>Sat, 03 Apr 2021 00:00:00 +0000</pubDate><guid>https://www.ffutop.com/posts/2021-04-03-nginx-dns-cache/</guid><description>NGINX 作为常用的反向代理软件，普遍适用于对外统一暴露各种内部服务等常见。在使用过程中，常使用内网 IP 直接声明需要反向代理的服务。 恰恰因为常规的使用</description></item><item><title>时间(Timestamp)、日历(Calendar)与夏令时</title><link>https://www.ffutop.com/posts/2021-03-15-datetime-vs-calendar/</link><pubDate>Mon, 15 Mar 2021 00:00:00 +0000</pubDate><guid>https://www.ffutop.com/posts/2021-03-15-datetime-vs-calendar/</guid><description>&lt;p>一个特殊的日期(&lt;code>1988-04-10&lt;/code>, 字段类型 &lt;code>date&lt;/code>)，从数据库尝试读取却始终抛出异常 &lt;code>HOUR_OF_DAY: 0-&amp;gt;1&lt;/code> 。最初百思不得其解，其后发现这个日期恰好是夏令时的起始日，而后又纠结于 1988 年夏令时“从 04 月 10 日早晨 2 时起，将时针往前拨一小时，即二时变三时”。&lt;/p></description></item><item><title>MySQL DeadLocks with INSERT</title><link>https://www.ffutop.com/posts/2020-11-06-deadlock-insert-update/</link><pubDate>Fri, 06 Nov 2020 00:00:00 +0000</pubDate><guid>https://www.ffutop.com/posts/2020-11-06-deadlock-insert-update/</guid><description>&lt;p>首次碰到 INSERT + UPDATE statement 造成的死锁问题，触及了知识盲区，费时做了分析。&lt;/p>
&lt;h2 id="死锁场景描述">死锁场景描述&lt;/h2>
&lt;p>&lt;em>下述所有事务隔离级别为 Read Committed&lt;/em>&lt;/p>
&lt;p>&lt;strong>1. 简化后的数据库表&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#007020;font-weight:bold">CREATE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">TABLE&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">`&lt;/span>user_address&lt;span style="color:#666">`&lt;/span>&lt;span style="color:#bbb"> &lt;/span>(&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">`&lt;/span>id&lt;span style="color:#666">`&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020">bigint&lt;/span>(&lt;span style="color:#40a070">11&lt;/span>)&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">NOT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">NULL&lt;/span>&lt;span style="color:#bbb"> &lt;/span>AUTO_INCREMENT&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">COMMENT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#4070a0">&amp;#39;主键&amp;#39;&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">`&lt;/span>user_id&lt;span style="color:#666">`&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020">varchar&lt;/span>(&lt;span style="color:#40a070">40&lt;/span>)&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">DEFAULT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#4070a0">&amp;#39;&amp;#39;&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">COMMENT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#4070a0">&amp;#39;用户主键&amp;#39;&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">`&lt;/span>comm_address&lt;span style="color:#666">`&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020">varchar&lt;/span>(&lt;span style="color:#40a070">1&lt;/span>)&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">DEFAULT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">NULL&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">COMMENT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#4070a0">&amp;#39;常用地址标识&amp;#39;&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">`&lt;/span>address&lt;span style="color:#666">`&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020">varchar&lt;/span>(&lt;span style="color:#40a070">200&lt;/span>)&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">DEFAULT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">NULL&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">COMMENT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#4070a0">&amp;#39;地址&amp;#39;&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">`&lt;/span>longitude&lt;span style="color:#666">`&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020">bigint&lt;/span>(&lt;span style="color:#40a070">20&lt;/span>)&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">DEFAULT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">NULL&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">COMMENT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#4070a0">&amp;#39;经度&amp;#39;&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">`&lt;/span>latitude&lt;span style="color:#666">`&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020">bigint&lt;/span>(&lt;span style="color:#40a070">20&lt;/span>)&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">DEFAULT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">NULL&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">COMMENT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#4070a0">&amp;#39;纬度&amp;#39;&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">`&lt;/span>create_time&lt;span style="color:#666">`&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">timestamp&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">NOT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">NULL&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">DEFAULT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">CURRENT_TIMESTAMP&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">COMMENT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#4070a0">&amp;#39;建立时间&amp;#39;&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">`&lt;/span>update_time&lt;span style="color:#666">`&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">timestamp&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">NOT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">NULL&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">DEFAULT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">CURRENT_TIMESTAMP&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">COMMENT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#4070a0">&amp;#39;更新时间&amp;#39;&lt;/span>,&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">PRIMARY&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">KEY&lt;/span>&lt;span style="color:#bbb"> &lt;/span>(&lt;span style="color:#666">`&lt;/span>id&lt;span style="color:#666">`&lt;/span>),&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">KEY&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#666">`&lt;/span>idx_user_id&lt;span style="color:#666">`&lt;/span>&lt;span style="color:#bbb"> &lt;/span>(&lt;span style="color:#666">`&lt;/span>user_id&lt;span style="color:#666">`&lt;/span>)&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#bbb">&lt;/span>)&lt;span style="color:#bbb"> &lt;/span>ENGINE&lt;span style="color:#666">=&lt;/span>InnoDB&lt;span style="color:#bbb"> &lt;/span>AUTO_INCREMENT&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#40a070">1&lt;/span>&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">DEFAULT&lt;/span>&lt;span style="color:#bbb"> &lt;/span>CHARSET&lt;span style="color:#666">=&lt;/span>utf8&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">COLLATE&lt;/span>&lt;span style="color:#666">=&lt;/span>utf8_bin&lt;span style="color:#bbb"> &lt;/span>&lt;span style="color:#007020;font-weight:bold">COMMENT&lt;/span>&lt;span style="color:#666">=&lt;/span>&lt;span style="color:#4070a0">&amp;#39;用户常用地址&amp;#39;&lt;/span>;&lt;span style="color:#bbb">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>2. 死锁事务时序&lt;/strong>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>时序&lt;/th>
&lt;th>事务 1&lt;/th>
&lt;th>事务 2&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>1&lt;/td>
&lt;td>&lt;code>START TRANSACTION&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>2&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;code>START TRANSACTION&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>3&lt;/td>
&lt;td>&lt;code>INSERT INTO user_address(user_id, address, longitude, latitude, create_time, update_time) VALUES ( 'c86d0f931d164fc1b53162355cf39fb4', '浙江省 杭州市 余杭区 五常街道 XXX', 121000000, 31000000, NOW(), NOW());&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>4&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;code>INSERT INTO user_address(user_id, address, longitude, latitude, create_time, update_time) VALUES ( 'c86d0f931d164fc1b53162355cf39fb4', '浙江省 杭州市 余杭区 五常街道 XXX', 121000000, 31000000, NOW(), NOW());&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>5&lt;/td>
&lt;td>&lt;code>UPDATE user_address SET comm_address = '0' WHERE user_id = 'c86d0f931d164fc1b53162355cf39fb4';&lt;/code>&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>6&lt;/td>
&lt;td>&lt;/td>
&lt;td>&lt;code>UPDATE user_address SET comm_address = '0' WHERE user_id = 'c86d0f931d164fc1b53162355cf39fb4';&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>3. INNODB Monitor Output&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-plain" data-lang="plain">&lt;span style="display:flex;">&lt;span>------------------------
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>LATEST DETECTED DEADLOCK
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>------------------------
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>2020-11-03 08:25:25 0x7f2801e1d700
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>*** (1) TRANSACTION:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>TRANSACTION 13335216894, ACTIVE 0 sec fetching rows
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mysql tables in use 1, locked 1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>LOCK WAIT 4 lock struct(s), heap size 1136, 3 row lock(s), undo log entries 1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>MySQL thread id 680655, OS thread handle 139810239182592, query id 120901872537 10.1.X.YYY mask_user updating
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>UPDATE `user_address` SET
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> `comm_address` = &amp;#39;0&amp;#39;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> WHERE `user_id` = &amp;#39;c760c70e42924b869beee418d3b30165&amp;#39;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>*** (1) WAITING FOR THIS LOCK TO BE GRANTED:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>RECORD LOCKS space id 2383 page no 125759 n bits 328 index idx_user_id of table `default`.`user_address` trx id 13335216894 lock_mode X locks rec but not gap waiting
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Record lock, heap no 262 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 0: len 20; hex 6337363063373065343239323462383639626565; asc c760c70e42924b869bee;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 1: len 4; hex 803c4394; asc &amp;lt;C ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>*** (2) TRANSACTION:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>TRANSACTION 13335216895, ACTIVE 0 sec starting index read, thread declared inside InnoDB 5000
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mysql tables in use 1, locked 1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>3 lock struct(s), heap size 1136, 2 row lock(s), undo log entries 1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>MySQL thread id 672593, OS thread handle 139809806997248, query id 120901872539 10.1.X.YYY mask_user updating
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>UPDATE `user_address` SET
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> `comm_address` = &amp;#39;0&amp;#39;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> WHERE `user_id` = &amp;#39;c760c70e42924b869beee418d3b30165&amp;#39;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>*** (2) HOLDS THE LOCK(S):
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>RECORD LOCKS space id 2383 page no 125759 n bits 328 index idx_user_id of table `default`.`user_address` trx id 13335216895 lock_mode X locks rec but not gap
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Record lock, heap no 262 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 0: len 20; hex 6337363063373065343239323462383639626565; asc c760c70e42924b869bee;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 1: len 4; hex 803c4394; asc &amp;lt;C ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>*** (2) WAITING FOR THIS LOCK TO BE GRANTED:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>RECORD LOCKS space id 2383 page no 125759 n bits 328 index idx_user_id of table `default`.`user_address` trx id 13335216895 lock_mode X locks rec but not gap waiting
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Record lock, heap no 261 PHYSICAL RECORD: n_fields 2; compact format; info bits 0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 0: len 20; hex 6337363063373065343239323462383639626565; asc c760c70e42924b869bee;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 1: len 4; hex 803c4393; asc &amp;lt;C ;;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>*** WE ROLL BACK TRANSACTION (2)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>